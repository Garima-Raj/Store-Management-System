{% extends 'core/base.html' %}

{% block title %}{{ title }}{% endblock %}

{% block content %}
    <div class="container my-5">
        <h2 class="mb-4">{{ title }}</h2>

        <form method="post" enctype="multipart/form-data" class="card p-4 shadow-sm">
            {% csrf_token %}

            {% if form.non_field_errors %}
                <div class="alert alert-danger">
                    {{ form.non_field_errors }}
                </div>
            {% endif %}

            <div class="mb-3">
                <label class="form-label">{{ form.name.label }}</label>
                {{ form.name }}
                {{ form.name.errors }}
            </div>

            <div class="mb-3">
                <label class="form-label">{{ form.category.label }}</label>
                {{ form.category }}
                {{ form.category.errors }}
            </div>

            <div class="mb-3">
                <label class="form-label">{{ form.description.label }}</label>
                {{ form.description }}
                {{ form.description.errors }}
            </div>

            <div class="row">
                <div class="col-md-6 mb-3">
                    <label class="form-label">{{ form.price.label }}</label>
                    {{ form.price }}
                    {{ form.price.errors }}
                </div>
                <div class="col-md-6 mb-3">
                    <label class="form-label">{{ form.stock_quantity.label }}</label>
                    {{ form.stock_quantity }}
                    {{ form.stock_quantity.errors }}
                </div>
            </div>

            <div class="mb-3">
                <label class="form-label">{{ form.image.label }}</label>
                {{ form.image }}
                {{ form.image.errors }}
                {% if form.instance.image %}
                    <small class="form-text text-muted">Current: <a href="{{ form.instance.image.url }}" target="_blank">View</a></small>
                {% endif %}
            </div>

            <div class="mb-3 form-check">
                {{ form.is_available }}
                <label class="form-check-label">{{ form.is_available.label }}</label>
            </div>

            <button type="submit" class="btn btn-success btn-lg w-100">Save Product</button>
        </form>

        <a href="{% url 'product_list_staff' %}" class="btn btn-secondary mt-3">Back to List</a>
    </div>
{% endblock %}